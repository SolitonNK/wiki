# Searching with Gravwell

検索パイプラインはGravwellの機能の中核です。 左側("upstream")でデータソースを指定し、表示のために「"downstream"のレンダラーに最終的に到達する前にデータが通過する必要があるフィルターの数を指定します。 たとえば、次のクエリは"reddit"とタグ付けされたデータを取得し、jsonモジュールを使用してBodyというフィールドを抽出し、evalモジュールを使用して20文字を超えるBodyフィールドを持つエントリをフィルターで除外し、最後にテーブルレンダラーを使用して表示します Bodyフィールドの内容：

```
tag=reddit json Body | eval len(Body) < 20 | table Body
```

## クエリのコンポーネント

上記のクエリ例は、以下で説明するいくつかの個別の部分に分割できます。

### タグの仕様

Gravwellクエリの最初の部分は、タグの仕様です。 ユーザーは、インデクサーがデータをプルしてパイプラインの先頭に入れる1つ以上のタグを指定する必要があります。 以下は、"reddit"とタグ付けされたデータを取得するようGravwellに指示します:

```
tag=reddit
```

複数のタグを指定することもできます:

```
tag=reddit,hackernews
```

または、ワイルドカードを使用できます:

```
tag=syslog-http-*,syslog-firewall-*
```

## 検索モジュール

検索モジュールは、データエントリの分析、不要なデータのフィルタリング、またはデータの興味深い部分の抽出に使用されます。  検索パイプラインには、多くの検索モジュールが次々に含まれ、それぞれが前のモジュールの結果を操作します。

[検索モジュールの完全なドキュメントについてはここをクリック](searchmodules.md)

## レンダリングモジュール

レンダリングモジュールは、検索モジュールによって生成された結果を取得し、グラフィカルにユーザーに提示します。  検索パイプラインには、パイプラインの最後に1つのレンダーモジュールのみが含まれます。

[レンダーモジュールの完全なドキュメントについてはここをクリック](rendermodules.md)

## 列挙値

列挙値は、検索パイプライン内で作成および使用される特別なデータ要素です。  以下のパイプラインでは、いくつかの列挙値が作成されています。

```
tag=reddit json Body | langfind -e Body | count by lang | sort by count desc | table lang count
```

最初に、jsonモジュールは生のエントリのJSONを解析し、"Body"要素を引き出して、"Body"という名前の列挙値に格納します。  次にlangfindモジュールは`Body`列挙値にアクセスし、使用されている言語の分析を試みます。  結果を`lang`と呼ばれる新しい列挙値に入れます。  次に、`count`モジュールは`lang`列挙値を読み取り、各値が出現する回数をカウントし`count`という名前の列挙値に結果を保存します。  パイプラインの残りの部分は、カウントに基づいて結果を並べ替え、`lang`と`count`の列挙値からテーブルを作成します

ドキュメント全体のさらなる例は、列挙値の使用を明確にするのに役立つはずです。

## 引用とトークン化

Gravwellモジュールに引数を指定するときは、特殊文字に注意してください。  ほとんどのモジュールは、スペース、タブ、改行、および次の文字を区切り文字として扱います:!#$%&'()*+,-./:;<=>?@

これらの文字のいずれかを含むモジュールに引数を指定する場合、引数を二重引用符で囲みます:

```
json "search-id"
```

```
grep "dank memes"
```

二重引用符を使用する必要がある場合は、たとえば、文字列で誤って使用されているダイアログタグを識別するために、シーケンス`",`を検索できます。

```
grep "\","
```
