# Ingesting Entries

Webサーバーはエントリを直接取り込むためのAPIを提供します。これは自動化されたスクリプトを実行したり、ユーザーがファイルをインポートできるようにする場合に便利です。

## JSON形式のエントリの取り込み

自動スクリプトは独自のエントリーを作成し、それらをJSONの一連の構造体として出荷します。これには、Dataフィールドで任意のバイトを許可するという利点があります。各エントリの必須フィールドは次のとおりです。

* TS: タイムスタンプ（例： "2018-02-12T11：06：44.215431364-07：00"）
* Tag: 使用される文字列タグ（例 "syslog"）
* Data: base64エンコードバイト（例 "Zm9vCg =="）

したがって、 "foo"を含むエントリと "test"を含むエントリの2つのエントリをタグmytagに/api/ingest/json送信するには、次のデータを使用してPUTを実行します。

```
[ { "TS": "2018-02-12T11:06:44.215431364-07:00", "Tag": "mytag", "Data": "Zm9v" }, { "TS": "2018-02-12T11:06:45.215431364-07:00", "Tag": "mytag", "Data": "dGVzdA==" } ]
```

サーバーは取り込まれたエントリー数を戻します。

## 行区切りファイルの取り込み

ユーザー提供のデータを取り込むには、行区切りファイルAPIが最も簡単なオプションです。これは/api/ingest/lines、以下のフォームパーツを使ってマルチパートPOSTを実行することで構成されています。

fileユーザー提供ファイルを含むという名前のファイル部分
tag希望する取り込みタグを含むという名前のフィールド
オプションのフィールドnoparsetimestamp。これを "true"に設定すると、エントリは各エントリから1つ解析するのではなく、現在のタイムスタンプで強制的に取り込まれます。
オプションのフィールドassumelocaltimezone。これを "true"に設定すると、タイムゾーンが明示的に指定されていない場合、エントリから抽出されたタイムスタンプは（UTCではなく）ローカルタイムゾーンにあると見なされます。
アップロードされたファイルは改行で分割されます。各行は個別のエントリとして取り込まれます。